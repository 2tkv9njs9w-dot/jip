<!DOCTYPE html>
<html lang="lo">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Jip Jip POS - Logo Version</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-database-compat.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+Lao:wght@300;400;700&display=swap');
        body { font-family: 'Noto Sans Lao', sans-serif; background-color: #f8fafc; overflow: hidden; touch-action: manipulation; }
        .hidden { display: none !important; }
        .active-scale:active { transform: scale(0.95); transition: 0.1s; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        #cart-sheet { transition: transform 0.3s ease-in-out; transform: translateY(100%); }
        #cart-sheet.open { transform: translateY(0); }
        .overlay { background: rgba(0,0,0,0.5); opacity: 0; pointer-events: none; transition: 0.3s; }
        .overlay.show { opacity: 1; pointer-events: auto; }
    </style>
</head>
<body>

    <section id="page-login" class="fixed inset-0 bg-orange-600 flex items-center justify-center p-6 z-[100]">
        <div class="bg-white p-10 rounded-[3rem] w-full max-w-xs text-center shadow-2xl">
            <div class="mb-6">
                <img src="https://voluntary-gray-s9ohiwocpj.edgeone.app/IMG_0333.jpeg" 
                     alt="Store Logo" 
                     style="display: block; margin: 0 auto;"
                     class="w-24 h-24 rounded-full object-cover border-4 border-orange-50 shadow-lg">
            </div>
            <h1 class="text-xl font-black mb-6 italic uppercase">‡ªÄ‡∫Ç‡∫ª‡ªâ‡∫≤‡∫õ‡∫Ω‡∫Å‡∫à‡∫¥‡∫ö‡ªÜ</h1>
            <input type="password" id="login-pass" placeholder="‡∫•‡∫∞‡∫´‡∫±‡∫î‡∫ú‡ªà‡∫≤‡∫ô" class="w-full p-4 bg-slate-100 rounded-2xl mb-4 text-center outline-none border-2 border-transparent focus:border-orange-500 text-xl font-bold">
            <button onclick="checkLogin()" class="w-full bg-slate-900 text-white py-4 rounded-2xl font-black active-scale shadow-lg">‡ªÄ‡∫Ç‡∫ª‡ªâ‡∫≤‡∫™‡∫π‡ªà‡∫•‡∫∞‡∫ö‡∫ª‡∫ö</button>
        </div>
    </section>

    <section id="page-table" class="hidden fixed inset-0 flex flex-col p-6 overflow-hidden">
        <header class="flex justify-between items-center mb-6">
            <div class="flex items-center gap-3">
                <img src="https://voluntary-gray-s9ohiwocpj.edgeone.app/IMG_0333.jpeg" class="w-10 h-10 rounded-xl object-cover shadow-sm">
                <h1 class="text-2xl font-black italic">‡ªÄ‡∫•‡∫∑‡∫≠‡∫Å‡ªÇ‡∫ï‡∫∞</h1>
            </div>
            <div class="flex gap-2">
                <button onclick="showPage('page-report')" class="w-10 h-10 bg-white rounded-xl shadow-sm flex items-center justify-center text-emerald-500 border active-scale"><i class="fas fa-chart-pie text-lg"></i></button>
                <button onclick="showPage('page-admin')" class="w-10 h-10 bg-slate-900 rounded-xl shadow-lg flex items-center justify-center text-white active-scale"><i class="fas fa-cog"></i></button>
            </div>
        </header>
        <div id="table-grid" class="grid grid-cols-2 gap-4 overflow-y-auto no-scrollbar pb-10"></div>
    </section>

    <section id="page-pos" class="hidden fixed inset-0 flex flex-col bg-slate-50 overflow-hidden">
        <header class="bg-white p-4 flex justify-between items-center border-b shadow-sm">
            <div class="flex items-center gap-3">
                <button onclick="backToTable()" class="w-10 h-10 flex items-center justify-center text-slate-400 active-scale"><i class="fas fa-chevron-left text-xl"></i></button>
                <h2 id="pos-table-name" class="font-black text-lg italic uppercase">‡ªÇ‡∫ï‡∫∞...</h2>
            </div>
            <div class="flex gap-1 bg-slate-100 p-1 rounded-xl">
                <button onclick="filterMenu('‡∫ó‡∫±‡∫á‡ªù‡∫ª‡∫î')" class="cat-btn px-4 py-1.5 rounded-lg text-[10px] font-black bg-white shadow-sm">‡∫ó‡∫±‡∫á‡ªù‡∫ª‡∫î</button>
                <button onclick="filterMenu('‡∫≠‡∫≤‡∫´‡∫≤‡∫ô')" class="cat-btn px-4 py-1.5 rounded-lg text-[10px] font-black text-slate-400">‡∫≠‡∫≤‡∫´‡∫≤‡∫ô</button>
                <button onclick="filterMenu('‡ªÄ‡∫Ñ‡∫∑‡ªà‡∫≠‡∫á‡∫î‡∫∑‡ªà‡∫°')" class="cat-btn px-4 py-1.5 rounded-lg text-[10px] font-black text-slate-400">‡ªÄ‡∫Ñ‡∫∑‡ªà‡∫≠‡∫á‡∫î‡∫∑‡ªà‡∫°</button>
            </div>
        </header>

        <div id="menu-list" class="flex-1 overflow-y-auto p-4 grid grid-cols-1 gap-4 no-scrollbar pb-32"></div>

        <div id="cart-bar" onclick="toggleCart()" class="fixed bottom-6 left-6 right-6 bg-slate-900 h-16 rounded-2xl flex items-center justify-between px-6 shadow-2xl z-40 active-scale cursor-pointer">
            <div class="flex items-center gap-3 text-white">
                <div class="relative">
                    <i class="fas fa-shopping-basket text-xl text-orange-400"></i>
                    <span id="cart-count-badge" class="absolute -top-2 -right-2 bg-white text-slate-900 text-[10px] font-black w-5 h-5 rounded-full flex items-center justify-center">0</span>
                </div>
                <div class="flex flex-col">
                    <span class="text-[8px] uppercase font-bold text-slate-400 leading-tight">‡∫ç‡∫≠‡∫î‡∫•‡∫ß‡∫°</span>
                    <span class="text-lg font-black leading-tight"><span id="total-price">0</span> KIP</span>
                </div>
            </div>
            <span class="text-white text-[10px] font-black border border-white/20 px-3 py-1 rounded-lg uppercase">‡ªÄ‡∫ö‡∫¥‡ªà‡∫á‡∫≠‡ªç‡ªÄ‡∫î‡∫µ‡ªâ</span>
        </div>

        <div id="cart-overlay" class="overlay fixed inset-0 z-[45]" onclick="toggleCart()"></div>
        <div id="cart-sheet" class="fixed bottom-0 left-0 right-0 bg-white rounded-t-[3rem] shadow-2xl z-[50] flex flex-col max-h-[85vh]">
            <div class="w-12 h-1.5 bg-slate-200 rounded-full mx-auto my-4" onclick="toggleCart()"></div>
            <div class="px-6 py-2 flex justify-between items-center border-b">
                <h3 class="font-black text-lg italic uppercase">‡∫•‡∫≤‡∫ç‡∫Å‡∫≤‡∫ô‡∫ó‡∫µ‡ªà‡∫™‡∫±‡ªà‡∫á</h3>
                <button onclick="clearTable()" class="text-red-500 text-[10px] font-black uppercase">‡∫•‡ªâ‡∫≤‡∫á‡∫ó‡∫±‡∫á‡ªù‡∫ª‡∫î</button>
            </div>
            <div id="cart-items" class="flex-1 overflow-y-auto p-6 space-y-4 no-scrollbar"></div>
            <div class="p-8 bg-slate-50 border-t space-y-4">
                <div class="grid grid-cols-2 gap-4">
                    <button onclick="saveCurrentOrder()" class="bg-slate-200 text-slate-800 py-4 rounded-2xl font-black active-scale text-xs">‡∫ö‡∫±‡∫ô‡∫ó‡∫∂‡∫Å‡ªÑ‡∫ß‡ªâ</button>
                    <button onclick="checkout()" class="bg-orange-600 text-white py-4 rounded-2xl font-black active-scale text-lg">‡ªÑ‡∫•‡ªà‡ªÄ‡∫á‡∫¥‡∫ô</button>
                </div>
            </div>
        </div>
    </section>

    <section id="page-admin" class="hidden fixed inset-0 bg-slate-100 p-6 overflow-y-auto no-scrollbar">
        <button onclick="showPage('page-table')" class="mb-6 font-bold text-slate-400 active-scale"><i class="fas fa-arrow-left"></i> ‡∫Å‡∫±‡∫ö‡∫Ñ‡∫∑‡∫ô</button>
        <div class="bg-white p-8 rounded-[2.5rem] shadow-sm mb-6 border">
            <h2 class="text-xl font-black mb-6 italic">‡ªÄ‡∫û‡∫µ‡ªà‡∫°‡ªÄ‡∫°‡∫ô‡∫π‡ªÉ‡ªù‡ªà</h2>
            <div class="space-y-4">
                <input type="text" id="admin-name" placeholder="‡∫ä‡∫∑‡ªà‡ªÄ‡∫°‡∫ô‡∫π" class="w-full p-4 bg-slate-50 rounded-2xl outline-none border focus:border-orange-500">
                <input type="text" id="admin-price" placeholder="‡∫•‡∫≤‡∫Ñ‡∫≤ (‡ªÄ‡∫ä‡∫±‡ªà‡∫ô: 40000,45000,50000)" class="w-full p-4 bg-slate-50 rounded-2xl outline-none border focus:border-orange-500">
                <select id="admin-category" class="w-full p-4 bg-slate-50 rounded-2xl font-bold border text-sm">
                    <option value="‡∫≠‡∫≤‡∫´‡∫≤‡∫ô">‡∫≠‡∫≤‡∫´‡∫≤‡∫ô</option>
                    <option value="‡ªÄ‡∫Ñ‡∫∑‡ªà‡∫≠‡∫á‡∫î‡∫∑‡ªà‡∫°">‡ªÄ‡∫Ñ‡∫∑‡ªà‡∫≠‡∫á‡∫î‡∫∑‡ªà‡∫°</option>
                </select>
                <button onclick="handleSaveMenu()" class="w-full bg-orange-600 text-white py-4 rounded-2xl font-black active-scale">‡∫ö‡∫±‡∫ô‡∫ó‡∫∂‡∫Å‡ªÄ‡∫°‡∫ô‡∫π</button>
            </div>
        </div>
        <div id="admin-display-list" class="space-y-2 pb-10"></div>
    </section>

    <section id="page-report" class="hidden fixed inset-0 bg-white p-6 overflow-y-auto no-scrollbar">
        <div class="flex justify-between items-center mb-6">
            <button onclick="showPage('page-table')" class="font-bold text-slate-400 active-scale"><i class="fas fa-arrow-left"></i> ‡∫Å‡∫±‡∫ö‡∫Ñ‡∫∑‡∫ô</button>
            <h2 class="text-xl font-black italic text-slate-800">‡∫•‡∫≤‡∫ç‡∫á‡∫≤‡∫ô‡∫ç‡∫≠‡∫î‡∫Ç‡∫≤‡∫ç</h2>
        </div>

        <div class="bg-slate-100 p-4 rounded-3xl mb-6 flex items-center justify-between border border-slate-200">
            <span class="text-[10px] font-black text-slate-500 uppercase ml-2 italic">‡ªÄ‡∫•‡∫∑‡∫≠‡∫Å‡∫ß‡∫±‡∫ô‡∫ó‡∫µ:</span>
            <input type="date" id="report-date-input" onchange="loadReports()" class="bg-white px-4 py-2 rounded-2xl font-black text-sm outline-none shadow-sm border-none">
        </div>

        <div id="report-summary" class="mb-6"></div>

        <div class="flex items-center gap-2 mb-4">
            <div class="h-[1px] flex-1 bg-slate-100"></div>
            <span class="text-[10px] font-black text-slate-300 uppercase italic">‡∫•‡∫≤‡∫ç‡∫Å‡∫≤‡∫ô‡∫ö‡∫¥‡∫ô</span>
            <div class="h-[1px] flex-1 bg-slate-100"></div>
        </div>

        <div id="report-container" class="space-y-3 pb-10"></div>
    </section>

    <div id="toast" class="fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-slate-900 text-white px-8 py-4 rounded-3xl font-black text-xs hidden z-[200] shadow-2xl text-center"></div>

    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyDrkORCwmsdCsdpH81Y40kaDpgrHU-U6ps",
            authDomain: "khaopiakpos.firebaseapp.com",
            databaseURL: "https://khaopiakpos-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "khaopiakpos",
            storageBucket: "khaopiakpos.firebasestorage.app",
            messagingSenderId: "51654913004",
            appId: "1:51654913004:web:57eb6bc244c1918beaaec9"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        let allMenus = [], cart = [], currentTable = "", currentCategory = "‡∫ó‡∫±‡∫á‡ªù‡∫ª‡∫î", isChanged = false;

        window.onload = () => {
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('report-date-input').value = today;
        };

        function showPage(id) {
            document.querySelectorAll('section').forEach(s => s.classList.add('hidden'));
            document.getElementById(id).classList.remove('hidden');
            if(id === 'page-table') listenTables();
            if(id === 'page-report') loadReports();
        }

        function checkLogin() {
            if(document.getElementById('login-pass').value === 'jip1234') showPage('page-table');
            else alert("‡∫•‡∫∞‡∫´‡∫±‡∫î‡∫ö‡ªç‡ªà‡∫ñ‡∫∑‡∫Å!");
        }

        function toggleCart() {
            document.getElementById('cart-sheet').classList.toggle('open');
            document.getElementById('cart-overlay').classList.toggle('show');
        }

        function showToast(msg) {
            const t = document.getElementById("toast");
            t.innerText = msg; t.classList.remove('hidden');
            setTimeout(() => t.classList.add('hidden'), 1200);
        }

        function renderMenus() {
            const container = document.getElementById('menu-list');
            const filtered = allMenus.filter(m => currentCategory === "‡∫ó‡∫±‡∫á‡ªù‡∫ª‡∫î" || m.category === currentCategory);
            container.innerHTML = filtered.map(m => {
                const prices = String(m.price).split(',').map(p => parseInt(p.replace(/[^0-9]/g, '')) || 0);
                const isFood = m.category === '‡∫≠‡∫≤‡∫´‡∫≤‡∫ô';
                return `
                <div class="bg-white rounded-[2rem] border p-5 shadow-sm flex flex-col gap-4">
                    <div class="flex justify-between items-start">
                        <h4 class="font-black text-slate-800 text-lg italic uppercase">${m.name}</h4>
                        <span class="text-[9px] font-black text-orange-500 bg-orange-50 px-3 py-1 rounded-full uppercase italic">${m.category}</span>
                    </div>
                    <div class="grid ${isFood ? 'grid-cols-3' : 'grid-cols-1'} gap-3">
                        ${isFood ? `
                            <button onclick="addToCart('${m.name}', ${prices[0]}, '‡∫ô‡ªâ‡∫≠‡∫ç')" class="bg-slate-50 py-3 rounded-2xl active-scale border border-slate-100 flex flex-col items-center">
                                <span class="text-[9px] font-bold text-slate-400">‡∫ô‡ªâ‡∫≠‡∫ç</span>
                                <span class="text-xs font-black">${(prices[0]/1000)}k</span>
                            </button>
                            <button onclick="addToCart('${m.name}', ${prices[1]||prices[0]}, '‡∫Å‡∫≤‡∫á')" class="bg-orange-50 py-3 rounded-2xl active-scale border border-orange-100 flex flex-col items-center text-orange-600">
                                <span class="text-[9px] font-bold">‡∫Å‡∫≤‡∫á</span>
                                <span class="text-xs font-black">${(prices[1]||prices[0])/1000}k</span>
                            </button>
                            <button onclick="addToCart('${m.name}', ${prices[2]||prices[0]}, '‡ªÉ‡∫´‡∫ç‡ªà')" class="bg-slate-50 py-3 rounded-2xl active-scale border border-slate-100 flex flex-col items-center">
                                <span class="text-[9px] font-bold text-slate-400">‡ªÉ‡∫´‡∫ç‡ªà</span>
                                <span class="text-xs font-black">${(prices[2]||prices[0])/1000}k</span>
                            </button>
                        ` : `
                            <button onclick="addToCart('${m.name}', ${prices[0]}, '‡∫õ‡∫ª‡∫Å‡∫Å‡∫∞‡∫ï‡∫¥')" class="w-full bg-slate-900 text-white py-4 rounded-2xl font-black active-scale text-sm">${prices[0].toLocaleString()} KIP</button>
                        `}
                    </div>
                </div>`;
            }).join('');
        }

        function addToCart(name, price, size) {
            const label = size === '‡∫õ‡∫ª‡∫Å‡∫Å‡∫∞‡∫ï‡∫¥' ? name : `${name} (${size})`;
            const foundIdx = cart.findIndex(i => i.name === label);
            if (foundIdx > -1) cart[foundIdx].qty++;
            else cart.push({ name: label, price: parseInt(price), qty: 1 });
            isChanged = true;
            updateCartUI();
            showToast(`+ ${label}`);
        }

        function updateCartUI() {
            const container = document.getElementById('cart-items');
            let total = cart.reduce((s, i) => s + (i.price * i.qty), 0);
            container.innerHTML = cart.map((item, idx) => `
                <div class="flex justify-between items-center p-2">
                    <div class="flex-1 pr-2">
                        <p class="font-black text-sm text-slate-800 leading-tight">${item.name}</p>
                        <p class="text-orange-600 font-bold text-xs">${item.price.toLocaleString()} KIP</p>
                    </div>
                    <div class="flex items-center gap-4 bg-slate-100 p-2 rounded-2xl border">
                        <button onclick="updateQty(${idx}, -1)" class="w-8 h-8 flex items-center justify-center text-slate-400 active-scale"><i class="fas fa-minus text-[10px]"></i></button>
                        <span class="font-black text-sm w-4 text-center">${item.qty}</span>
                        <button onclick="updateQty(${idx}, 1)" class="w-8 h-8 flex items-center justify-center text-slate-900 active-scale"><i class="fas fa-plus text-[10px]"></i></button>
                    </div>
                </div>`).join('');
            document.getElementById('total-price').innerText = total.toLocaleString();
            document.getElementById('cart-count-badge').innerText = cart.length;
        }

        function updateQty(idx, delta) {
            cart[idx].qty += delta;
            if (cart[idx].qty <= 0) cart.splice(idx, 1);
            isChanged = true;
            updateCartUI();
        }

        async function saveCurrentOrder() {
            if (!currentTable || cart.length === 0) return;
            await db.ref('activeOrders/' + currentTable).set({ table: currentTable, items: cart, timestamp: Date.now() });
            isChanged = false;
            showPage('page-table');
            showToast("‡∫ö‡∫±‡∫ô‡∫ó‡∫∂‡∫Å‡ªÅ‡∫•‡ªâ‡∫ß!");
        }

        async function checkout() {
            if(cart.length === 0) return;
            const total = cart.reduce((s, i) => s + (i.price * i.qty), 0);
            if(confirm(`‡ªÑ‡∫•‡ªà‡ªÄ‡∫á‡∫¥‡∫ô ${currentTable}: ${total.toLocaleString()} KIP?`)) {
                await db.ref('sales').push({
                    table: currentTable, total,
                    items: cart.map(i => `${i.name} x${i.qty}`).join(', '),
                    date: new Date().toLocaleDateString(),
                    timestamp: Date.now()
                });
                await db.ref('activeOrders/' + currentTable).remove();
                cart = []; isChanged = false;
                showPage('page-table');
                showToast("üí∞ ‡∫™‡∫≥‡ªÄ‡∫•‡∫±‡∫î!");
            }
        }

        function backToTable() { showPage('page-table'); }
        async function clearTable() { if(confirm("‡∫•‡∫∂‡∫ö‡∫ó‡∫±‡∫á‡ªù‡∫ª‡∫î?")) { await db.ref('activeOrders/' + currentTable).remove(); cart = []; isChanged = false; toggleCart(); showPage('page-table'); } }

        function listenTables() {
            db.ref('activeOrders').on('value', snap => {
                const data = snap.val() || {};
                const grid = document.getElementById('table-grid');
                grid.innerHTML = '';
                for(let i=1; i<=20; i++) {
                    const name = `‡ªÇ‡∫ï‡∫∞ ${i}`;
                    const active = data[name];
                    grid.innerHTML += `
                    <div onclick="openPOS('${name}')" class="${active ? 'bg-orange-600 text-white shadow-xl scale-95 border-orange-500' : 'bg-white text-slate-800 border-slate-100'} p-8 rounded-[2.5rem] shadow-sm text-center font-black active-scale border transition-all">
                        <p class="text-lg italic tracking-tighter uppercase">${name}</p>
                        <p class="text-[8px] uppercase opacity-50 mt-1 italic">${active ? '‡∫°‡∫µ‡∫•‡∫π‡∫Å‡∫Ñ‡ªâ‡∫≤' : '‡∫ß‡ªà‡∫≤‡∫á'}</p>
                    </div>`;
                }
            });
        }

        function openPOS(name) {
            currentTable = name;
            document.getElementById('pos-table-name').innerText = name;
            db.ref('activeOrders/' + name).once('value', snap => {
                const d = snap.val();
                cart = (d && d.items) ? d.items : [];
                isChanged = false; updateCartUI(); showPage('page-pos');
            });
        }

        function filterMenu(c) {
            currentCategory = c;
            document.querySelectorAll('.cat-btn').forEach(b => {
                b.className = b.innerText.includes(c) ? 'cat-btn px-4 py-1.5 rounded-lg text-[10px] font-black bg-slate-900 text-white shadow-lg' : 'cat-btn px-4 py-1.5 rounded-lg text-[10px] font-black text-slate-400';
            });
            renderMenus();
        }

        db.ref('menus').on('value', snap => {
            allMenus = snap.val() ? Object.values(snap.val()) : [];
            renderMenus();
            document.getElementById('admin-display-list').innerHTML = allMenus.map(m => `
                <div class="flex justify-between items-center bg-white p-4 rounded-2xl border mb-2 shadow-sm">
                    <span class="text-[10px] font-black italic">${m.name}</span>
                    <button onclick="db.ref('menus/${m.id}').remove()" class="text-red-400 p-2"><i class="fas fa-trash-alt"></i></button>
                </div>`).join('');
        });

        async function handleSaveMenu() {
            const name = document.getElementById('admin-name').value;
            const price = document.getElementById('admin-price').value;
            const category = document.getElementById('admin-category').value;
            if(name && price) {
                const ref = db.ref('menus').push();
                await ref.set({ id: ref.key, name, price, category });
                document.getElementById('admin-name').value = '';
                document.getElementById('admin-price').value = '';
                showToast("‡ªÄ‡∫û‡∫µ‡ªà‡∫°‡ªÅ‡∫•‡ªâ‡∫ß!");
            }
        }

        function loadReports() {
            const selectedDate = document.getElementById('report-date-input').value;
            if (!selectedDate) return;
            const formattedDate = new Date(selectedDate).toLocaleDateString();

            db.ref('sales').on('value', snap => {
                const data = snap.val() || {};
                const allSales = Object.values(data);
                const filteredSales = allSales.filter(s => s.date === formattedDate).sort((a,b) => b.timestamp - a.timestamp);
                const dailyTotal = filteredSales.reduce((acc, s) => acc + s.total, 0);

                document.getElementById('report-summary').innerHTML = `
                    <div class="bg-slate-900 p-8 rounded-[2.5rem] text-white shadow-2xl relative overflow-hidden">
                        <div class="absolute -right-4 -top-4 w-24 h-24 bg-orange-50 rounded-full opacity-20"></div>
                        <p class="text-[10px] font-black uppercase text-orange-400 mb-2 relative z-10 italic">‡∫ç‡∫≠‡∫î‡∫Ç‡∫≤‡∫ç‡∫õ‡∫∞‡∫à‡∫≥‡∫ß‡∫±‡∫ô</p>
                        <h2 class="text-3xl font-black italic relative z-10">${dailyTotal.toLocaleString()} KIP</h2>
                        <p class="text-[10px] text-slate-400 mt-2 italic font-bold">‡∫•‡∫ß‡∫°‡∫ó‡∫±‡∫á‡ªù‡∫ª‡∫î: ${filteredSales.length} ‡∫ö‡∫¥‡∫ô</p>
                    </div>`;

                if (filteredSales.length === 0) {
                    document.getElementById('report-container').innerHTML = `<div class="py-20 text-center text-slate-300"><i class="fas fa-folder-open text-5xl mb-3"></i><p class="font-bold">‡∫ö‡ªç‡ªà‡∫°‡∫µ‡∫Ç‡ªç‡ªâ‡∫°‡∫π‡∫ô‡ªÉ‡∫ô‡∫°‡∫∑‡ªâ‡∫ô‡∫µ‡ªâ</p></div>`;
                } else {
                    document.getElementById('report-container').innerHTML = filteredSales.map(s => `
                        <div class="bg-slate-50 p-5 rounded-[2rem] border border-slate-100 flex justify-between items-center shadow-sm">
                            <div class="text-left flex-1 pr-4">
                                <div class="flex items-center gap-2 mb-1">
                                    <span class="bg-orange-100 text-orange-600 px-3 py-0.5 rounded-full text-[9px] font-black">${s.table}</span>
                                    <span class="text-[8px] text-slate-300 font-bold">${new Date(s.timestamp).toLocaleTimeString()}</span>
                                </div>
                                <p class="text-[10px] text-slate-500 font-bold line-clamp-1">${s.items}</p>
                            </div>
                            <p class="font-black text-slate-900 text-sm italic">${s.total.toLocaleString()}</p>
                        </div>`).join('');
                }
            });
        }

        listenTables();
    </script>
</body>
</html>